{"ast":null,"code":"import React,{Component}from'react';import'../../styles/FormPages.css';import{toast}from'react-toastify';import{ToastComponent}from'../common';import{connect}from'react-redux';import{loginAction,redirectAction}from'../../store/actions/authActions';class LoginPage extends Component{constructor(props){super(props);this.handleBlur=field=>event=>{this.setState({touched:{...this.state.touched,[field]:true}});};this.validate=(username,password)=>{return{username:username.length===0,password:password.length===0};};this.state={username:'',password:'',touched:{username:false,password:false}};this.onChangeHandler=this.onChangeHandler.bind(this);this.onSubmitHandler=this.onSubmitHandler.bind(this);}componentDidUpdate(prevProps,prevState){if(this.props.loginError.hasError&&prevProps.loginError!==this.props.loginError){toast.error(/*#__PURE__*/React.createElement(ToastComponent.errorToast,{text:`${this.props.loginError.message}`}),{position:toast.POSITION.TOP_RIGHT});}else if(this.props.loginSuccess){this.props.redirect();toast.success(/*#__PURE__*/React.createElement(ToastComponent.successToast,{text:' You have successfully logged in!'}),{position:toast.POSITION.TOP_RIGHT});this.props.history.push('/');}}onChangeHandler(event){this.setState({[event.target.name]:event.target.value});}onSubmitHandler(event){event.preventDefault();if(!this.canBeSubmitted()){return;}const{username,password}=this.state;this.props.login(username,password);}canBeSubmitted(){const{username,password}=this.state;const errors=this.validate(username,password);const isDisabled=Object.keys(errors).some(x=>errors[x]);return!isDisabled;}render(){const{username,password}=this.state;const errors=this.validate(username,password);const isEnabled=!Object.keys(errors).some(x=>errors[x]);const shouldMarkError=field=>{const hasError=errors[field];const shouldShow=this.state.touched[field];return hasError?shouldShow:false;};return/*#__PURE__*/React.createElement(\"section\",{className:\"pt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container login-form-content-section pb-4 \"},/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center font-weight-bold mt-4\",style:{'margin':'1rem auto','paddingTop':'2rem'}},\"Login\"),/*#__PURE__*/React.createElement(\"div\",{className:\"hr-styles\",style:{'width':'70%'}}),/*#__PURE__*/React.createElement(\"form\",{className:\"Login-form-container\",onSubmit:this.onSubmitHandler},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\"},\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control \"+(shouldMarkError('username')?\"error\":\"\"),id:\"username\",name:\"username\",value:this.state.username,onChange:this.onChangeHandler,onBlur:this.handleBlur('username'),\"aria-describedby\":\"usernameHelp\",placeholder:\"Enter username\"}),shouldMarkError('username')&&/*#__PURE__*/React.createElement(\"small\",{id:\"usernameHelp\",className:\"form-text alert alert-danger\"},\"Username is required!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",className:\"form-control \"+(shouldMarkError('password')?\"error\":\"\"),id:\"password\",name:\"password\",value:this.state.password,onChange:this.onChangeHandler,onBlur:this.handleBlur('password'),\"aria-describedby\":\"passwordHelp\",placeholder:\"Enter password\"}),shouldMarkError('password')&&/*#__PURE__*/React.createElement(\"small\",{id:\"passwordHelp\",className:\"form-text alert alert-danger\"},\"Password is required!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"button\",{disabled:!isEnabled,type:\"submit\",className:\"btn App-button-primary btn-lg m-3\"},\"Login\")))));}};function mapStateToProps(state,ownProps){return{loginSuccess:state.login.success,loginError:state.loginError};}function mapDispatchToProps(dispatch,ownProps){return{login:(username,password)=>dispatch(loginAction(username,password)),redirect:()=>dispatch(redirectAction())};}export default connect(mapStateToProps,mapDispatchToProps)(LoginPage);","map":{"version":3,"names":["React","Component","toast","ToastComponent","connect","loginAction","redirectAction","LoginPage","constructor","props","handleBlur","field","event","setState","touched","state","validate","username","password","length","onChangeHandler","bind","onSubmitHandler","componentDidUpdate","prevProps","prevState","loginError","hasError","error","createElement","errorToast","text","message","position","POSITION","TOP_RIGHT","loginSuccess","redirect","success","successToast","history","push","target","name","value","preventDefault","canBeSubmitted","login","errors","isDisabled","Object","keys","some","x","render","isEnabled","shouldMarkError","shouldShow","className","style","onSubmit","htmlFor","type","id","onChange","onBlur","placeholder","disabled","mapStateToProps","ownProps","mapDispatchToProps","dispatch"],"sources":["C:/Users/rijul/Downloads/Alumni/Alumani/Client/src/components/auth/LoginPage.js"],"sourcesContent":["import React, { Component } from 'react';\nimport '../../styles/FormPages.css';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../common';\nimport { connect } from 'react-redux';\nimport { loginAction, redirectAction } from '../../store/actions/authActions';\n\nclass LoginPage extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            username: '',\n            password: '',\n            touched: {\n                username: false,\n                password: false\n            }\n        };\n\n        this.onChangeHandler = this.onChangeHandler.bind(this);\n        this.onSubmitHandler = this.onSubmitHandler.bind(this);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.props.loginError.hasError && prevProps.loginError !== this.props.loginError) {\n            toast.error(<ToastComponent.errorToast text={`${this.props.loginError.message}`} />, {\n                position: toast.POSITION.TOP_RIGHT\n            });\n        } else if (this.props.loginSuccess) {\n            this.props.redirect();\n\n            toast.success(<ToastComponent.successToast text={' You have successfully logged in!'} />, {\n                position: toast.POSITION.TOP_RIGHT\n            });\n\n            this.props.history.push('/');\n        }\n    }\n\n    onChangeHandler(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    onSubmitHandler(event) {\n        event.preventDefault();\n\n        if (!this.canBeSubmitted()) {\n            return;\n        }\n\n        const { username, password } = this.state;\n        this.props.login(username, password);\n    }\n\n    canBeSubmitted() {\n        const { username, password } = this.state;\n        const errors = this.validate(username, password);\n        const isDisabled = Object.keys(errors).some(x => errors[x])\n        return !isDisabled;\n    }\n\n    handleBlur = (field) => (event) => {\n        this.setState({\n            touched: { ...this.state.touched, [field]: true }\n        });\n    }\n\n    validate = (username, password) => {\n        return {\n            username: username.length === 0,\n            password: password.length === 0\n        }\n    }\n\n    render() {\n        const { username, password } = this.state;\n        const errors = this.validate(username, password);\n        const isEnabled = !Object.keys(errors).some(x => errors[x])\n\n        const shouldMarkError = (field) => {\n            const hasError = errors[field];\n            const shouldShow = this.state.touched[field];\n\n            return hasError ? shouldShow : false;\n        }\n\n        return (\n            <section className=\"pt-3\">\n                <div className=\"container login-form-content-section pb-4 \" >\n                    <h1 className=\"text-center font-weight-bold mt-4\" style={{ 'margin': '1rem auto', 'paddingTop': '2rem' }}>Login</h1>\n                    <div className=\"hr-styles\" style={{ 'width': '70%' }}></div>\n\n                    <form className=\"Login-form-container\" onSubmit={this.onSubmitHandler}>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"username\">Username</label>\n                            <input\n                                type=\"text\"\n                                className={\"form-control \" + (shouldMarkError('username') ? \"error\" : \"\")}\n                                id=\"username\"\n                                name=\"username\"\n                                value={this.state.username}\n                                onChange={this.onChangeHandler}\n                                onBlur={this.handleBlur('username')}\n                                aria-describedby=\"usernameHelp\"\n                                placeholder=\"Enter username\"\n                            />\n                            {shouldMarkError('username') && <small id=\"usernameHelp\" className=\"form-text alert alert-danger\">Username is required!</small>}\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"password\" >Password</label>\n                            <input\n                                type=\"password\"\n                                className={\"form-control \" + (shouldMarkError('password') ? \"error\" : \"\")}\n                                id=\"password\"\n                                name=\"password\"\n                                value={this.state.password}\n                                onChange={this.onChangeHandler}\n                                onBlur={this.handleBlur('password')}\n                                aria-describedby=\"passwordHelp\"\n                                placeholder=\"Enter password\"\n                            />\n                            {shouldMarkError('password') && <small id=\"passwordHelp\" className=\"form-text alert alert-danger\">Password is required!</small>}\n                        </div>\n\n                        <div className=\"text-center\">\n                            <button disabled={!isEnabled} type=\"submit\" className=\"btn App-button-primary btn-lg m-3\">Login</button>\n                        </div>\n                    </form>\n                </div>\n            </section>\n        )\n    }\n};\n\nfunction mapStateToProps(state, ownProps) {\n    return {\n        loginSuccess: state.login.success,\n        loginError: state.loginError\n    }\n}\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n    return {\n        login: (username, password) => dispatch(loginAction(username, password)),\n        redirect: () => dispatch(redirectAction())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginPage);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}