{"ast":null,"code":"import { LOGIN_SUCCESS, LOGIN_ERROR, REDIRECTED, REGISTER_SUCCESS, REGISTER_ERROR, LOGOUT_SUCCESS } from './actionTypes';\nimport { ajaxBegin, ajaxEnd } from './ajaxActions';\nimport { requester } from '../../infrastructure';\nfunction registerSuccess(message) {\n  return {\n    type: REGISTER_SUCCESS,\n    message\n  };\n}\nfunction registerError(messsage) {\n  return {\n    type: REGISTER_ERROR,\n    messsage\n  };\n}\nfunction loginSuccess() {\n  return {\n    type: LOGIN_SUCCESS\n  };\n}\nfunction loginError(messsage) {\n  return {\n    type: LOGIN_ERROR,\n    messsage\n  };\n}\nfunction redirectAction() {\n  return {\n    type: REDIRECTED\n  };\n}\nfunction logoutSuccess() {\n  return {\n    type: LOGOUT_SUCCESS\n  };\n}\nfunction registerAction(userData) {\n  return dispatch => {\n    dispatch(ajaxBegin());\n    return requester.post('/users/register', {\n      ...userData\n    }, response => {\n      if (response.success === true) {\n        dispatch(registerSuccess(response.message));\n      } else {\n        dispatch(registerError(response.message));\n      }\n      dispatch(ajaxEnd());\n    }).catch(err => {\n      dispatch(registerError(`${err.message}`));\n      dispatch(ajaxEnd());\n    });\n  };\n}\nfunction loginAction(username, password) {\n  return dispatch => {\n    dispatch(ajaxBegin());\n    return requester.post('/login', {\n      username,\n      password\n    }, response => {\n      if (response.error) {\n        dispatch(loginError(' Incorrect credentials!'));\n      } else {\n        saveToken(response);\n        dispatch(loginSuccess());\n      }\n      dispatch(ajaxEnd());\n    }).catch(err => {\n      localStorage.clear();\n      dispatch(loginError(`${err.message}`));\n      dispatch(ajaxEnd());\n    });\n  };\n}\nfunction logoutAction() {\n  return dispatch => {\n    localStorage.clear();\n    dispatch(logoutSuccess());\n  };\n}\nfunction saveToken(response) {\n  const token = response.split(' ')[1];\n  localStorage.setItem('token', token);\n}\nexport { loginAction, redirectAction, registerAction, logoutAction };","map":{"version":3,"names":["LOGIN_SUCCESS","LOGIN_ERROR","REDIRECTED","REGISTER_SUCCESS","REGISTER_ERROR","LOGOUT_SUCCESS","ajaxBegin","ajaxEnd","requester","registerSuccess","message","type","registerError","messsage","loginSuccess","loginError","redirectAction","logoutSuccess","registerAction","userData","dispatch","post","response","success","catch","err","loginAction","username","password","error","saveToken","localStorage","clear","logoutAction","token","split","setItem"],"sources":["C:/Users/Administrator/Documents/0011_Final_PROJECT/Alumni-Networking-Platform/Client/src/store/actions/authActions.js"],"sourcesContent":["import { LOGIN_SUCCESS, LOGIN_ERROR, REDIRECTED, REGISTER_SUCCESS, REGISTER_ERROR, LOGOUT_SUCCESS } from './actionTypes';\r\nimport { ajaxBegin, ajaxEnd } from './ajaxActions';\r\nimport { requester } from '../../infrastructure';\r\n\r\nfunction registerSuccess(message) {\r\n    return {\r\n        type: REGISTER_SUCCESS,\r\n        message\r\n    }\r\n}\r\n\r\nfunction registerError(messsage) {\r\n    return {\r\n        type: REGISTER_ERROR,\r\n        messsage\r\n    }\r\n}\r\n\r\nfunction loginSuccess() {\r\n    return {\r\n        type: LOGIN_SUCCESS,\r\n    }\r\n}\r\n\r\nfunction loginError(messsage) {\r\n    return {\r\n        type: LOGIN_ERROR,\r\n        messsage\r\n    }\r\n}\r\n\r\nfunction redirectAction() {\r\n    return {\r\n        type: REDIRECTED\r\n    }\r\n}\r\n\r\nfunction logoutSuccess() {\r\n    return {\r\n        type: LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\n\r\nfunction registerAction(userData) {\r\n    return (dispatch) => {\r\n        dispatch(ajaxBegin());\r\n        return requester.post('/users/register', { ...userData }, (response) => {\r\n            if (response.success === true) {\r\n                dispatch(registerSuccess(response.message))\r\n            } else {\r\n                dispatch(registerError(response.message))\r\n            }\r\n            dispatch(ajaxEnd());\r\n        }).catch(err => {\r\n            dispatch(registerError(`${err.message}`));\r\n            dispatch(ajaxEnd());\r\n        })\r\n    }\r\n}\r\n\r\nfunction loginAction(username, password) {\r\n    return (dispatch) => {\r\n        dispatch(ajaxBegin());\r\n        return requester.post('/login', { username, password }, (response) => {\r\n            if (response.error) {\r\n                dispatch(loginError(' Incorrect credentials!'));\r\n            } else {\r\n                saveToken(response)\r\n                dispatch(loginSuccess());\r\n            }\r\n            dispatch(ajaxEnd());\r\n        }).catch(err => {\r\n            localStorage.clear();\r\n            dispatch(loginError(`${err.message}`));\r\n            dispatch(ajaxEnd());\r\n        })\r\n    }\r\n}\r\n\r\nfunction logoutAction() {\r\n    return (dispatch) => {\r\n        localStorage.clear();\r\n        dispatch(logoutSuccess())\r\n    }\r\n}\r\n\r\nfunction saveToken(response) {\r\n    const token = response.split(' ')[1];\r\n    localStorage.setItem('token', token);\r\n}\r\n\r\nexport { loginAction, redirectAction, registerAction, logoutAction };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}