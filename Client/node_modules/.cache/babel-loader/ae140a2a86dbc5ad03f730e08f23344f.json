{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\salma\\\\Desktop\\\\IN DEVLOPMENT\\\\Social-Network-master\\\\SocialNetwork\\\\Client\\\\src\\\\infrastructure\\\\userService.js\";\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../components/common';\nvar BASE_URL = 'http://localhost:8000';\nexport default {\n  getBaseUrl: function getBaseUrl() {\n    return BASE_URL;\n  },\n  isAuthenticated: function isAuthenticated() {\n    return window.localStorage.getItem('token') !== null;\n  },\n  getPayload: function getPayload() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload;\n      }\n    }\n  },\n  getUsername: function getUsername() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['sub'];\n      }\n    }\n  },\n  getUserId: function getUserId() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['id'];\n      }\n    }\n  },\n  getRole: function getRole() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['role'];\n      }\n    }\n  },\n  getProfilePicUrl: function getProfilePicUrl() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['profilePicUrl'];\n      }\n    }\n  },\n  getFirstName: function getFirstName() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['firstName'];\n      }\n    }\n  },\n  isTheUserLoggedIn: function isTheUserLoggedIn() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      try {\n        var payload = JSON.parse(atob(token.split('.')[1]));\n        var role = payload['role'];\n        if (payload) {\n          if (role !== null || role !== undefined) {\n            return true;\n          }\n        }\n      } catch (err) {\n        localStorage.clear();\n        toast.error(/*#__PURE__*/React.createElement(ToastComponent.errorToast, {\n          text: 'Unauthorized',\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n        // throw new Error(\"Unauthorized\");\n      }\n    }\n    return false;\n  },\n  isRoot: function isRoot() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      var role = payload['role'];\n      if (payload) {\n        if ((role !== null || role !== undefined) && role === 'ROOT') {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  isAdmin: function isAdmin() {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      var role = payload['role'];\n      if (payload) {\n        if ((role !== null || role !== undefined) && (role === 'ADMIN' || role === 'ROOT')) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  isLoggedInUser: function isLoggedInUser(username) {\n    var token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        var loggedInUserName = payload['sub'];\n        if (username === loggedInUserName) {\n          return true;\n        }\n        return false;\n      }\n    }\n  },\n  checkIfIsRoot: function checkIfIsRoot(role) {\n    if (role === 'ROOT') {\n      return true;\n    }\n    return false;\n  },\n  formatUsername: function formatUsername() {\n    var firstName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var lastName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var nameLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 18;\n    var name = firstName + ' ' + lastName;\n    if (name.length >= nameLength) {\n      return name.substring(0, nameLength) + '...';\n    }\n    return name;\n  },\n  getImageSize: function getImageSize(profilePicUrl) {\n    var img = new Image();\n    img.src = profilePicUrl;\n    if (img.width >= img.height) {\n      return 'l';\n    }\n    return '';\n  }\n};","map":{"version":3,"names":["React","toast","ToastComponent","BASE_URL","getBaseUrl","isAuthenticated","window","localStorage","getItem","getPayload","token","undefined","payload","JSON","parse","atob","split","getUsername","getUserId","getRole","getProfilePicUrl","getFirstName","isTheUserLoggedIn","role","err","clear","error","createElement","errorToast","text","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","position","POSITION","TOP_RIGHT","isRoot","isAdmin","isLoggedInUser","username","loggedInUserName","checkIfIsRoot","formatUsername","firstName","arguments","length","lastName","nameLength","name","substring","getImageSize","profilePicUrl","img","Image","src","width","height"],"sources":["C:/Users/salma/Desktop/IN DEVLOPMENT/Social-Network-master/SocialNetwork/Client/src/infrastructure/userService.js"],"sourcesContent":["import React from 'react';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../components/common'\n\nconst BASE_URL = 'http://localhost:8000';\n\nexport default {\n    getBaseUrl: () => {\n        return BASE_URL;\n    },\n\n    isAuthenticated: () => {\n        return window.localStorage.getItem('token') !== null\n    },\n\n    getPayload: () => {\n        const token = localStorage.getItem('token')\n\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload;\n            }\n        }\n    },\n\n    getUsername: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n\n            if (payload) {\n                return payload['sub'];\n            }\n        }\n    },\n\n    getUserId: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n\n            if (payload) {\n                return payload['id'];\n            }\n        }\n    },\n\n    getRole: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload['role'];\n            }\n        }\n    },\n\n    getProfilePicUrl: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload['profilePicUrl'];\n            }\n        }\n    },\n\n    getFirstName: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload['firstName'];\n            }\n        }\n    },\n\n    isTheUserLoggedIn: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            try {\n                const payload = JSON.parse(atob(token.split('.')[1]));\n                const role = payload['role'];\n\n                if (payload) {\n                    if (role !== null || role !== undefined) {\n                        return true;\n                    }\n                }\n            } catch (err) {\n                localStorage.clear();\n                toast.error(<ToastComponent.errorToast text={'Unauthorized'} />, {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n                // throw new Error(\"Unauthorized\");\n            }\n        }\n        return false;\n    },\n\n    isRoot: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            const role = payload['role'];\n\n            if (payload) {\n                if ((role !== null || role !== undefined) && role === 'ROOT') {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    },\n\n    isAdmin: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            const role = payload['role'];\n            if (payload) {\n                if ((role !== null || role !== undefined) && (role === 'ADMIN' || role === 'ROOT')) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    },\n\n\n    isLoggedInUser(username) {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n\n            if (payload) {\n                const loggedInUserName = payload['sub'];\n                if (username === loggedInUserName) {\n                    return true;\n                }\n                return false;\n            }\n        }\n    },\n\n    checkIfIsRoot(role) {\n        if (role === 'ROOT') {\n            return true;\n        }\n\n        return false;\n    },\n\n    formatUsername(firstName = '', lastName = '', nameLength = 18) {\n        let name = firstName + ' ' + lastName;\n\n        if (name.length >= nameLength) {\n            return name.substring(0, nameLength) + '...';\n        }\n        return name;\n    },\n\n    getImageSize(profilePicUrl) {\n        let img = new Image();\n        img.src = profilePicUrl;\n\n        if (img.width >= img.height) {\n            return 'l'\n        }\n\n        return '';\n    }\n} "],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,cAAc,QAAQ,sBAAsB;AAErD,IAAMC,QAAQ,GAAG,uBAAuB;AAExC,eAAe;EACXC,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAQ;IACd,OAAOD,QAAQ;EACnB,CAAC;EAEDE,eAAe,EAAE,SAAjBA,eAAeA,CAAA,EAAQ;IACnB,OAAOC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI;EACxD,CAAC;EAEDC,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAQ;IACd,IAAMC,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,IAAIJ,OAAO,EAAE;QACT,OAAOA,OAAO;MAClB;IACJ;EACJ,CAAC;EAEDK,WAAW,EAAE,SAAbA,WAAWA,CAAA,EAAQ;IACf,IAAMP,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAErD,IAAIJ,OAAO,EAAE;QACT,OAAOA,OAAO,CAAC,KAAK,CAAC;MACzB;IACJ;EACJ,CAAC;EAEDM,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAQ;IACb,IAAMR,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAErD,IAAIJ,OAAO,EAAE;QACT,OAAOA,OAAO,CAAC,IAAI,CAAC;MACxB;IACJ;EACJ,CAAC;EAEDO,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAQ;IACX,IAAMT,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,IAAIJ,OAAO,EAAE;QACT,OAAOA,OAAO,CAAC,MAAM,CAAC;MAC1B;IACJ;EACJ,CAAC;EAEDQ,gBAAgB,EAAE,SAAlBA,gBAAgBA,CAAA,EAAQ;IACpB,IAAMV,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,IAAIJ,OAAO,EAAE;QACT,OAAOA,OAAO,CAAC,eAAe,CAAC;MACnC;IACJ;EACJ,CAAC;EAEDS,YAAY,EAAE,SAAdA,YAAYA,CAAA,EAAQ;IAChB,IAAMX,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,IAAIJ,OAAO,EAAE;QACT,OAAOA,OAAO,CAAC,WAAW,CAAC;MAC/B;IACJ;EACJ,CAAC;EAEDU,iBAAiB,EAAE,SAAnBA,iBAAiBA,CAAA,EAAQ;IACrB,IAAMZ,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAI;QACA,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrD,IAAMO,IAAI,GAAGX,OAAO,CAAC,MAAM,CAAC;QAE5B,IAAIA,OAAO,EAAE;UACT,IAAIW,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKZ,SAAS,EAAE;YACrC,OAAO,IAAI;UACf;QACJ;MACJ,CAAC,CAAC,OAAOa,GAAG,EAAE;QACVjB,YAAY,CAACkB,KAAK,CAAC,CAAC;QACpBxB,KAAK,CAACyB,KAAK,cAAC1B,KAAA,CAAA2B,aAAA,CAACzB,cAAc,CAAC0B,UAAU;UAACC,IAAI,EAAE,cAAe;UAAAC,MAAA,EAAAC,KAAA;UAAAC,QAAA;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QAAA,CAAE,CAAC,EAAE;UAC7DC,QAAQ,EAAEpC,KAAK,CAACqC,QAAQ,CAACC;QAC7B,CAAC,CAAC;QACF;MACJ;IACJ;IACA,OAAO,KAAK;EAChB,CAAC;EAEDC,MAAM,EAAE,SAARA,MAAMA,CAAA,EAAQ;IACV,IAAM9B,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,IAAMO,IAAI,GAAGX,OAAO,CAAC,MAAM,CAAC;MAE5B,IAAIA,OAAO,EAAE;QACT,IAAI,CAACW,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKZ,SAAS,KAAKY,IAAI,KAAK,MAAM,EAAE;UAC1D,OAAO,IAAI;QACf;MACJ;IACJ;IAEA,OAAO,KAAK;EAChB,CAAC;EAEDkB,OAAO,EAAE,SAATA,OAAOA,CAAA,EAAQ;IACX,IAAM/B,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,IAAMO,IAAI,GAAGX,OAAO,CAAC,MAAM,CAAC;MAC5B,IAAIA,OAAO,EAAE;QACT,IAAI,CAACW,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKZ,SAAS,MAAMY,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,MAAM,CAAC,EAAE;UAChF,OAAO,IAAI;QACf;MACJ;IACJ;IAEA,OAAO,KAAK;EAChB,CAAC;EAGDmB,cAAc,WAAdA,cAAcA,CAACC,QAAQ,EAAE;IACrB,IAAMjC,KAAK,GAAGH,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIE,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,EAAE;MACvC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAErD,IAAIJ,OAAO,EAAE;QACT,IAAMgC,gBAAgB,GAAGhC,OAAO,CAAC,KAAK,CAAC;QACvC,IAAI+B,QAAQ,KAAKC,gBAAgB,EAAE;UAC/B,OAAO,IAAI;QACf;QACA,OAAO,KAAK;MAChB;IACJ;EACJ,CAAC;EAEDC,aAAa,WAAbA,aAAaA,CAACtB,IAAI,EAAE;IAChB,IAAIA,IAAI,KAAK,MAAM,EAAE;MACjB,OAAO,IAAI;IACf;IAEA,OAAO,KAAK;EAChB,CAAC;EAEDuB,cAAc,WAAdA,cAAcA,CAAA,EAAiD;IAAA,IAAhDC,SAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAArC,SAAA,GAAAqC,SAAA,MAAG,EAAE;IAAA,IAAEE,QAAQ,GAAAF,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAArC,SAAA,GAAAqC,SAAA,MAAG,EAAE;IAAA,IAAEG,UAAU,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAArC,SAAA,GAAAqC,SAAA,MAAG,EAAE;IACzD,IAAII,IAAI,GAAGL,SAAS,GAAG,GAAG,GAAGG,QAAQ;IAErC,IAAIE,IAAI,CAACH,MAAM,IAAIE,UAAU,EAAE;MAC3B,OAAOC,IAAI,CAACC,SAAS,CAAC,CAAC,EAAEF,UAAU,CAAC,GAAG,KAAK;IAChD;IACA,OAAOC,IAAI;EACf,CAAC;EAEDE,YAAY,WAAZA,YAAYA,CAACC,aAAa,EAAE;IACxB,IAAIC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACrBD,GAAG,CAACE,GAAG,GAAGH,aAAa;IAEvB,IAAIC,GAAG,CAACG,KAAK,IAAIH,GAAG,CAACI,MAAM,EAAE;MACzB,OAAO,GAAG;IACd;IAEA,OAAO,EAAE;EACb;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}