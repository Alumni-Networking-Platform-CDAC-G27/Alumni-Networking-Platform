{"ast":null,"code":"import React,{Fragment,Component}from'react';import{userService}from'../../infrastructure';import TextareaAutosize from'react-autosize-textarea';export default class WritePost extends Component{constructor(props){super(props);this.changeUserData=userdata=>{this.setState({loggedInUserProfilePicUrl:userdata.profilePicUrl});};this.handleBlur=field=>event=>{this.setState({touched:{...this.state.touched,[field]:true}});};this.validate=content=>{return{content:content.length===0};};this.state={content:'',imageUrl:'',createPostData:'',touched:{content:false}};this.handleBlur=this.handleBlur.bind(this);this.onChangeHandler=this.onChangeHandler.bind(this);this.onSubmitHandler=this.onSubmitHandler.bind(this);}componentDidUpdate(prevProps,prevState){const loading=this.props.createPostData.loading||this.props.loadingAllPosts;if(!loading&&this.state.createPostData!==this.props.createPostData){this.setState({content:'',imageUrl:'',createPostData:this.props.createPostData});}}onSubmitHandler(event){event.preventDefault();if(!this.canBeSubmitted()){return;}const{content,imageUrl}=this.state;this.props.createPost(content,imageUrl);}onChangeHandler(event){this.setState({[event.target.name]:event.target.value});}canBeSubmitted(){const{content}=this.state;const errors=this.validate(content);const isDisabled=Object.keys(errors).some(x=>errors[x]);return!isDisabled;}render(){const{content}=this.state;const errors=this.validate(content);const isEnabled=!Object.keys(errors).some(x=>errors[x]);const displayButon=isEnabled?'':'hidden';const imageClass=userService.getImageSize(this.props.loggedInUser.profilePicUrl);const loggedInUserProfilePicUrl=this.props.loggedInUser.profilePicUrl;const loggedInUserFirstName=this.props.loggedInUser.firstName;let formattedUsername=userService.formatUsername(loggedInUserFirstName);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"section\",{className:\"posts-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"write-post\",id:\"create-post-button-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-image\"},/*#__PURE__*/React.createElement(\"img\",{className:imageClass,src:loggedInUserProfilePicUrl,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-area-container\"},/*#__PURE__*/React.createElement(\"form\",{id:\"post-form\",onSubmit:this.onSubmitHandler},/*#__PURE__*/React.createElement(\"div\",{className:\"\",id:\"post-textarea-form-group\"},/*#__PURE__*/React.createElement(TextareaAutosize,{name:\"content\",id:\"content\",className:\"post-textarea\",value:this.state.content,onChange:this.onChangeHandler,onBlur:this.handleBlur('content'),\"aria-describedby\":\"contentHelp\",placeholder:`What's on your mind, ${formattedUsername}?`})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"button\",{disabled:!isEnabled,style:{'visibility':`${displayButon}`},type:\"submit\",className:\"btn uiButtonGroup post-button-fbPhotoCurationControl App-button-primary \"},\"POST\"))))))));}}","map":{"version":3,"names":["React","Fragment","Component","userService","TextareaAutosize","WritePost","constructor","props","changeUserData","userdata","setState","loggedInUserProfilePicUrl","profilePicUrl","handleBlur","field","event","touched","state","validate","content","length","imageUrl","createPostData","bind","onChangeHandler","onSubmitHandler","componentDidUpdate","prevProps","prevState","loading","loadingAllPosts","preventDefault","canBeSubmitted","createPost","target","name","value","errors","isDisabled","Object","keys","some","x","render","isEnabled","displayButon","imageClass","getImageSize","loggedInUser","loggedInUserFirstName","firstName","formattedUsername","formatUsername","createElement","className","id","src","alt","onSubmit","onChange","onBlur","placeholder","disabled","style","type"],"sources":["C:/Users/rijul/Downloads/Alumni/Alumani/Client/src/components/home/WritePost.js"],"sourcesContent":["import React, { Fragment, Component } from 'react';\nimport { userService } from '../../infrastructure';\nimport TextareaAutosize from 'react-autosize-textarea';\n\nexport default class WritePost extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            content: '',\n            imageUrl: '',\n            createPostData: '',\n            touched: {\n                content: false,\n            }\n        };\n\n        this.handleBlur = this.handleBlur.bind(this);\n        this.onChangeHandler = this.onChangeHandler.bind(this);\n        this.onSubmitHandler = this.onSubmitHandler.bind(this);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const loading = this.props.createPostData.loading || this.props.loadingAllPosts;\n\n        if (!loading && this.state.createPostData !== this.props.createPostData) {\n            this.setState({\n                content: '',\n                imageUrl: '',\n                createPostData: this.props.createPostData,\n            })\n        }\n    }\n\n    changeUserData = (userdata) => {\n        this.setState({loggedInUserProfilePicUrl: userdata.profilePicUrl})\n    }\n\n    onSubmitHandler(event) {\n        event.preventDefault();\n        if (!this.canBeSubmitted()) {\n            return;\n        }\n\n        const { content, imageUrl } = this.state;\n        this.props.createPost(content, imageUrl);\n    }\n\n    onChangeHandler(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        });\n    }\n\n    handleBlur = (field) => (event) => {\n        this.setState({\n            touched: { ...this.state.touched, [field]: true }\n        });\n    }\n\n    canBeSubmitted() {\n        const { content } = this.state;\n        const errors = this.validate(content);\n        const isDisabled = Object.keys(errors).some(x => errors[x])\n        return !isDisabled;\n    }\n\n    validate = (content) => {\n        return {\n            content: content.length === 0,\n        }\n    }\n\n    render() {\n        const { content } = this.state;\n        const errors = this.validate(content);\n        const isEnabled = !Object.keys(errors).some(x => errors[x]);\n        const displayButon = isEnabled ? '' : 'hidden';\n\n        const imageClass = userService.getImageSize(this.props.loggedInUser.profilePicUrl);\n        const loggedInUserProfilePicUrl = this.props.loggedInUser.profilePicUrl;\n        const loggedInUserFirstName = this.props.loggedInUser.firstName;\n\n        let formattedUsername = userService.formatUsername(loggedInUserFirstName)\n\n        return (\n            <Fragment>\n                <section className=\"posts-section\">\n                    <div className=\"write-post\" id=\"create-post-button-container\">\n                        <div className=\"post\">\n                            <div className=\"post-image\">\n                                <img className={imageClass} src={loggedInUserProfilePicUrl} alt=\"\" />\n                            </div>\n                            <div className=\"post-area-container\">\n                                <form id=\"post-form\" onSubmit={this.onSubmitHandler}>\n                                    <div className=\"\" id=\"post-textarea-form-group\">\n                                        <TextareaAutosize\n                                            name=\"content\"\n                                            id=\"content\"\n                                            className=\"post-textarea\"\n                                            value={this.state.content}\n                                            onChange={this.onChangeHandler}\n                                            onBlur={this.handleBlur('content')}\n                                            aria-describedby=\"contentHelp\"\n                                            placeholder={`What's on your mind, ${formattedUsername}?`}\n                                        >\n                                        </TextareaAutosize>\n                                    </div>\n\n                                    <div className=\"text-center\">\n                                        <button disabled={!isEnabled} style={{ 'visibility': `${displayButon}` }} type=\"submit\" className=\"btn uiButtonGroup post-button-fbPhotoCurationControl App-button-primary \">POST</button>\n                                    </div>\n\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            </Fragment>\n        )\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}