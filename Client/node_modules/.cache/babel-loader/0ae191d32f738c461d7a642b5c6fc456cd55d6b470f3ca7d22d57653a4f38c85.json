{"ast":null,"code":"import{LOGIN_SUCCESS,LOGIN_ERROR,REDIRECTED,REGISTER_SUCCESS,REGISTER_ERROR,LOGOUT_SUCCESS}from'./actionTypes';import{ajaxBegin,ajaxEnd}from'./ajaxActions';import{requester}from'../../infrastructure';function registerSuccess(message){return{type:REGISTER_SUCCESS,message};}function registerError(messsage){return{type:REGISTER_ERROR,messsage};}function loginSuccess(){return{type:LOGIN_SUCCESS};}function loginError(messsage){return{type:LOGIN_ERROR,messsage};}function redirectAction(){return{type:REDIRECTED};}function logoutSuccess(){return{type:LOGOUT_SUCCESS};}function registerAction(userData){return dispatch=>{dispatch(ajaxBegin());return requester.post('/users/register',{...userData},response=>{if(response.success===true){dispatch(registerSuccess(response.message));}else{dispatch(registerError(response.message));}dispatch(ajaxEnd());}).catch(err=>{dispatch(registerError(`${err.message}`));dispatch(ajaxEnd());});};}function loginAction(username,password){return dispatch=>{dispatch(ajaxBegin());return requester.post('/login',{username,password},response=>{if(response.error){dispatch(loginError(' Incorrect credentials!'));}else{saveToken(response);dispatch(loginSuccess());}dispatch(ajaxEnd());}).catch(err=>{localStorage.clear();dispatch(loginError(`${err.message}`));dispatch(ajaxEnd());});};}function logoutAction(){return dispatch=>{localStorage.clear();dispatch(logoutSuccess());};}function saveToken(response){const token=response.split(' ')[1];localStorage.setItem('token',token);}export{loginAction,redirectAction,registerAction,logoutAction};","map":{"version":3,"names":["LOGIN_SUCCESS","LOGIN_ERROR","REDIRECTED","REGISTER_SUCCESS","REGISTER_ERROR","LOGOUT_SUCCESS","ajaxBegin","ajaxEnd","requester","registerSuccess","message","type","registerError","messsage","loginSuccess","loginError","redirectAction","logoutSuccess","registerAction","userData","dispatch","post","response","success","catch","err","loginAction","username","password","error","saveToken","localStorage","clear","logoutAction","token","split","setItem"],"sources":["C:/Users/rijul/Downloads/Alumni/Alumani/Client/src/store/actions/authActions.js"],"sourcesContent":["import { LOGIN_SUCCESS, LOGIN_ERROR, REDIRECTED, REGISTER_SUCCESS, REGISTER_ERROR, LOGOUT_SUCCESS } from './actionTypes';\nimport { ajaxBegin, ajaxEnd } from './ajaxActions';\nimport { requester } from '../../infrastructure';\n\nfunction registerSuccess(message) {\n    return {\n        type: REGISTER_SUCCESS,\n        message\n    }\n}\n\nfunction registerError(messsage) {\n    return {\n        type: REGISTER_ERROR,\n        messsage\n    }\n}\n\nfunction loginSuccess() {\n    return {\n        type: LOGIN_SUCCESS,\n    }\n}\n\nfunction loginError(messsage) {\n    return {\n        type: LOGIN_ERROR,\n        messsage\n    }\n}\n\nfunction redirectAction() {\n    return {\n        type: REDIRECTED\n    }\n}\n\nfunction logoutSuccess() {\n    return {\n        type: LOGOUT_SUCCESS\n    }\n}\n\n\nfunction registerAction(userData) {\n    return (dispatch) => {\n        dispatch(ajaxBegin());\n        return requester.post('/users/register', { ...userData }, (response) => {\n            if (response.success === true) {\n                dispatch(registerSuccess(response.message))\n            } else {\n                dispatch(registerError(response.message))\n            }\n            dispatch(ajaxEnd());\n        }).catch(err => {\n            dispatch(registerError(`${err.message}`));\n            dispatch(ajaxEnd());\n        })\n    }\n}\n\nfunction loginAction(username, password) {\n    return (dispatch) => {\n        dispatch(ajaxBegin());\n        return requester.post('/login', { username, password }, (response) => {\n            if (response.error) {\n                dispatch(loginError(' Incorrect credentials!'));\n            } else {\n                saveToken(response)\n                dispatch(loginSuccess());\n            }\n            dispatch(ajaxEnd());\n        }).catch(err => {\n            localStorage.clear();\n            dispatch(loginError(`${err.message}`));\n            dispatch(ajaxEnd());\n        })\n    }\n}\n\nfunction logoutAction() {\n    return (dispatch) => {\n        localStorage.clear();\n        dispatch(logoutSuccess())\n    }\n}\n\nfunction saveToken(response) {\n    const token = response.split(' ')[1];\n    localStorage.setItem('token', token);\n}\n\nexport { loginAction, redirectAction, registerAction, logoutAction };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}