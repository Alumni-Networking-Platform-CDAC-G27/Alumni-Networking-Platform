{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\0011_Final_PROJECT\\\\Alumni-Networking-Platform\\\\Client\\\\src\\\\infrastructure\\\\userService.js\";\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../components/common';\nconst BASE_URL = 'http://localhost:8080';\nexport default {\n  getBaseUrl: () => {\n    return BASE_URL;\n  },\n  isAuthenticated: () => {\n    return window.localStorage.getItem('token') !== null;\n  },\n  getPayload: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload;\n      }\n    }\n  },\n  getUsername: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['sub'];\n      }\n    }\n  },\n  getUserId: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['id'];\n      }\n    }\n  },\n  getRole: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['role'];\n      }\n    }\n  },\n  getProfilePicUrl: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['profilePicUrl'];\n      }\n    }\n  },\n  getFirstName: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        return payload['firstName'];\n      }\n    }\n  },\n  isTheUserLoggedIn: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      try {\n        const payload = JSON.parse(atob(token.split('.')[1]));\n        const role = payload['role'];\n        if (payload) {\n          if (role !== null || role !== undefined) {\n            return true;\n          }\n        }\n      } catch (err) {\n        localStorage.clear();\n        toast.error(/*#__PURE__*/React.createElement(ToastComponent.errorToast, {\n          text: 'Unauthorized',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n        // throw new Error(\"Unauthorized\");\n      }\n    }\n    return false;\n  },\n  isRoot: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      const role = payload['role'];\n      if (payload) {\n        if ((role !== null || role !== undefined) && role === 'ROOT') {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  isAdmin: () => {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      const role = payload['role'];\n      if (payload) {\n        if ((role !== null || role !== undefined) && (role === 'ADMIN' || role === 'ROOT')) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  isLoggedInUser(username) {\n    const token = localStorage.getItem('token');\n    if (token !== null && token !== undefined) {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (payload) {\n        const loggedInUserName = payload['sub'];\n        if (username === loggedInUserName) {\n          return true;\n        }\n        return false;\n      }\n    }\n  },\n  checkIfIsRoot(role) {\n    if (role === 'ROOT') {\n      return true;\n    }\n    return false;\n  },\n  formatUsername() {\n    let firstName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    let lastName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    let nameLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 18;\n    let name = firstName + ' ' + lastName;\n    if (name.length >= nameLength) {\n      return name.substring(0, nameLength) + '...';\n    }\n    return name;\n  },\n  getImageSize(profilePicUrl) {\n    let img = new Image();\n    img.src = profilePicUrl;\n    if (img.width >= img.height) {\n      return 'l';\n    }\n    return '';\n  }\n};","map":{"version":3,"names":["React","toast","ToastComponent","BASE_URL","getBaseUrl","isAuthenticated","window","localStorage","getItem","getPayload","token","undefined","payload","JSON","parse","atob","split","getUsername","getUserId","getRole","getProfilePicUrl","getFirstName","isTheUserLoggedIn","role","err","clear","error","createElement","errorToast","text","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","position","POSITION","TOP_RIGHT","isRoot","isAdmin","isLoggedInUser","username","loggedInUserName","checkIfIsRoot","formatUsername","firstName","arguments","length","lastName","nameLength","name","substring","getImageSize","profilePicUrl","img","Image","src","width","height"],"sources":["C:/Users/Administrator/Documents/0011_Final_PROJECT/Alumni-Networking-Platform/Client/src/infrastructure/userService.js"],"sourcesContent":["import React from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { ToastComponent } from '../components/common'\r\n\r\nconst BASE_URL = 'http://localhost:8080';\r\n\r\nexport default {\r\n    getBaseUrl: () => {\r\n        return BASE_URL;\r\n    },\r\n\r\n    isAuthenticated: () => {\r\n        return window.localStorage.getItem('token') !== null\r\n    },\r\n\r\n    getPayload: () => {\r\n        const token = localStorage.getItem('token')\r\n\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            if (payload) {\r\n                return payload;\r\n            }\r\n        }\r\n    },\r\n\r\n    getUsername: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n\r\n            if (payload) {\r\n                return payload['sub'];\r\n            }\r\n        }\r\n    },\r\n\r\n    getUserId: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n\r\n            if (payload) {\r\n                return payload['id'];\r\n            }\r\n        }\r\n    },\r\n\r\n    getRole: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            if (payload) {\r\n                return payload['role'];\r\n            }\r\n        }\r\n    },\r\n\r\n    getProfilePicUrl: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            if (payload) {\r\n                return payload['profilePicUrl'];\r\n            }\r\n        }\r\n    },\r\n\r\n    getFirstName: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            if (payload) {\r\n                return payload['firstName'];\r\n            }\r\n        }\r\n    },\r\n\r\n    isTheUserLoggedIn: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            try {\r\n                const payload = JSON.parse(atob(token.split('.')[1]));\r\n                const role = payload['role'];\r\n\r\n                if (payload) {\r\n                    if (role !== null || role !== undefined) {\r\n                        return true;\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                localStorage.clear();\r\n                toast.error(<ToastComponent.errorToast text={'Unauthorized'} />, {\r\n                    position: toast.POSITION.TOP_RIGHT\r\n                });\r\n                // throw new Error(\"Unauthorized\");\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    isRoot: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            const role = payload['role'];\r\n\r\n            if (payload) {\r\n                if ((role !== null || role !== undefined) && role === 'ROOT') {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    isAdmin: () => {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            const role = payload['role'];\r\n            if (payload) {\r\n                if ((role !== null || role !== undefined) && (role === 'ADMIN' || role === 'ROOT')) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n\r\n    isLoggedInUser(username) {\r\n        const token = localStorage.getItem('token')\r\n        if (token !== null && token !== undefined) {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n\r\n            if (payload) {\r\n                const loggedInUserName = payload['sub'];\r\n                if (username === loggedInUserName) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    checkIfIsRoot(role) {\r\n        if (role === 'ROOT') {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    formatUsername(firstName = '', lastName = '', nameLength = 18) {\r\n        let name = firstName + ' ' + lastName;\r\n\r\n        if (name.length >= nameLength) {\r\n            return name.substring(0, nameLength) + '...';\r\n        }\r\n        return name;\r\n    },\r\n\r\n    getImageSize(profilePicUrl) {\r\n        let img = new Image();\r\n        img.src = profilePicUrl;\r\n\r\n        if (img.width >= img.height) {\r\n            return 'l'\r\n        }\r\n\r\n        return '';\r\n    }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}