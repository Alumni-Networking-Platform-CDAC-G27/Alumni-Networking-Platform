{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\salma\\\\Desktop\\\\IN DEVLOPMENT\\\\Alumani\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { LOGIN_SUCCESS, LOGIN_ERROR, REDIRECTED, REGISTER_SUCCESS, REGISTER_ERROR, LOGOUT_SUCCESS } from './actionTypes';\nimport { ajaxBegin, ajaxEnd } from './ajaxActions';\nimport { requester } from '../../infrastructure';\nfunction registerSuccess(message) {\n  return {\n    type: REGISTER_SUCCESS,\n    message: message\n  };\n}\nfunction registerError(messsage) {\n  return {\n    type: REGISTER_ERROR,\n    messsage: messsage\n  };\n}\nfunction loginSuccess() {\n  return {\n    type: LOGIN_SUCCESS\n  };\n}\nfunction loginError(messsage) {\n  return {\n    type: LOGIN_ERROR,\n    messsage: messsage\n  };\n}\nfunction redirectAction() {\n  return {\n    type: REDIRECTED\n  };\n}\nfunction logoutSuccess() {\n  return {\n    type: LOGOUT_SUCCESS\n  };\n}\nfunction registerAction(userData) {\n  return function (dispatch) {\n    dispatch(ajaxBegin());\n    return requester.post('/api/auth/register', _objectSpread({}, userData), function (response) {\n      if (response.success === true) {\n        dispatch(registerSuccess(response.message));\n      } else {\n        dispatch(registerError(response.message));\n      }\n      dispatch(ajaxEnd());\n    }).catch(function (err) {\n      dispatch(registerError(\"\".concat(err.message)));\n      dispatch(ajaxEnd());\n    });\n  };\n}\nfunction loginAction(username, password) {\n  return function (dispatch) {\n    dispatch(ajaxBegin());\n    return requester.post('/api/auth/login', {\n      username: username,\n      password: password\n    }, function (response) {\n      if (response.error) {\n        dispatch(loginError(' Incorrect credentials!'));\n      } else {\n        saveToken(response);\n        dispatch(loginSuccess());\n      }\n      dispatch(ajaxEnd());\n    }).catch(function (err) {\n      localStorage.clear();\n      dispatch(loginError(\"\".concat(err.message)));\n      dispatch(ajaxEnd());\n    });\n  };\n}\nfunction logoutAction() {\n  return function (dispatch) {\n    localStorage.clear();\n    dispatch(logoutSuccess());\n  };\n}\nfunction saveToken(response) {\n  var token = response.split(' ')[1];\n  localStorage.setItem('token', token);\n}\nexport { loginAction, redirectAction, registerAction, logoutAction };","map":{"version":3,"names":["LOGIN_SUCCESS","LOGIN_ERROR","REDIRECTED","REGISTER_SUCCESS","REGISTER_ERROR","LOGOUT_SUCCESS","ajaxBegin","ajaxEnd","requester","registerSuccess","message","type","registerError","messsage","loginSuccess","loginError","redirectAction","logoutSuccess","registerAction","userData","dispatch","post","_objectSpread","response","success","catch","err","concat","loginAction","username","password","error","saveToken","localStorage","clear","logoutAction","token","split","setItem"],"sources":["C:/Users/salma/Desktop/IN DEVLOPMENT/Alumani/Client/src/store/actions/authActions.js"],"sourcesContent":["import { LOGIN_SUCCESS, LOGIN_ERROR, REDIRECTED, REGISTER_SUCCESS, REGISTER_ERROR, LOGOUT_SUCCESS } from './actionTypes';\nimport { ajaxBegin, ajaxEnd } from './ajaxActions';\nimport { requester } from '../../infrastructure';\n\nfunction registerSuccess(message) {\n    return {\n        type: REGISTER_SUCCESS,\n        message\n    }\n}\n\nfunction registerError(messsage) {\n    return {\n        type: REGISTER_ERROR,\n        messsage\n    }\n}\n\nfunction loginSuccess() {\n    return {\n        type: LOGIN_SUCCESS,\n    }\n}\n\nfunction loginError(messsage) {\n    return {\n        type: LOGIN_ERROR,\n        messsage\n    }\n}\n\nfunction redirectAction() {\n    return {\n        type: REDIRECTED\n    }\n}\n\nfunction logoutSuccess() {\n    return {\n        type: LOGOUT_SUCCESS\n    }\n}\n\n\nfunction registerAction(userData) {\n    return (dispatch) => {\n        dispatch(ajaxBegin());\n        return requester.post('/api/auth/register', { ...userData }, (response) => {\n            if (response.success === true) {\n                dispatch(registerSuccess(response.message))\n            } else {\n                dispatch(registerError(response.message))\n            }\n            dispatch(ajaxEnd());\n        }).catch(err => {\n            dispatch(registerError(`${err.message}`));\n            dispatch(ajaxEnd());\n        })\n    }\n}\n\nfunction loginAction(username, password) {\n    return (dispatch) => {\n        dispatch(ajaxBegin());\n        return requester.post('/api/auth/login', { username, password }, (response) => {\n            if (response.error) {\n                dispatch(loginError(' Incorrect credentials!'));\n            } else {\n                saveToken(response)\n                dispatch(loginSuccess());\n            }\n            dispatch(ajaxEnd());\n        }).catch(err => {\n            localStorage.clear();\n            dispatch(loginError(`${err.message}`));\n            dispatch(ajaxEnd());\n        })\n    }\n}\n\nfunction logoutAction() {\n    return (dispatch) => {\n        localStorage.clear();\n        dispatch(logoutSuccess())\n    }\n}\n\nfunction saveToken(response) {\n    const token = response.split(' ')[1];\n    localStorage.setItem('token', token);\n}\n\nexport { loginAction, redirectAction, registerAction, logoutAction };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}